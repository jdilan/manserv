<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Tab Test - Standalone</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f5f5f5; }
        .container { max-width: 1200px; margin: 0 auto; background: white; padding: 30px; border-radius: 10px; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
        h1 { color: #333; text-align: center; margin-bottom: 30px; }
        
        /* Form Styles */
        fieldset { border: 1px solid #ddd; border-radius: 5px; padding: 20px; margin-bottom: 20px; }
        legend { font-weight: bold; padding: 0 10px; }
        .form-row { display: flex; gap: 20px; margin-bottom: 15px; }
        .form-group { flex: 1; display: flex; flex-direction: column; }
        .form-group label { font-weight: 500; margin-bottom: 5px; color: #555; }
        .form-group input, .form-group select { padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 1em; }
        
        /* Section Styles */
        .search-section { border: 2px solid #007bff !important; background-color: #f8f9ff; }
        .editable-section { border: 2px solid #28a745 !important; background-color: #f8fff9; }
        .readonly-section { border: 1px solid #ddd !important; background-color: #f9f9f9; }
        .readonly-field { background-color: #f0f0f0 !important; color: #666; cursor: not-allowed; }
        
        .search-section legend { color: #007bff !important; }
        .editable-section legend { color: #28a745 !important; }
        
        /* Button Styles */
        button { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-size: 1em; font-weight: 500; margin: 5px; }
        .btn-primary { background: #007bff; color: white; }
        .btn-secondary { background: #6c757d; color: white; }
        .btn-success { background: #28a745; color: white; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }
        
        /* Message Styles */
        .alert { padding: 15px; margin: 20px 0; border-radius: 4px; }
        .alert-success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .alert-error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        
        /* Responsive */
        @media (max-width: 768px) { .form-row { flex-direction: column; } }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚úèÔ∏è Update Loan Account - Standalone Test</h1>
        <p><strong>This is a standalone version that demonstrates the Update Tab functionality without requiring an API server.</strong></p>

        <!-- Messages -->
        <div id="messages"></div>

        <!-- Search Section -->
        <fieldset class="search-section">
            <legend>üîç Load Account</legend>
            <div class="form-row">
                <div class="form-group">
                    <label>Reference Number:</label>
                    <input type="text" id="searchRefNo" placeholder="e.g., LA-2025-0001">
                </div>
                <div class="form-group" style="text-align: center; align-self: center;">
                    <strong>OR</strong>
                </div>
                <div class="form-group">
                    <label>Account ID:</label>
                    <input type="number" id="searchAccountId" placeholder="e.g., 1">
                </div>
            </div>
            <div>
                <button onclick="loadAccount()" class="btn-primary">üîç Load Account</button>
                <button onclick="clearSearch()" class="btn-secondary">üóëÔ∏è Clear</button>
            </div>
        </fieldset>

        <!-- Account Information Panel -->
        <div id="accountInfo" style="display: none;">
            <!-- General Information -->
            <fieldset class="editable-section">
                <legend>General Information (Customer Name and Long Name are editable)</legend>
                <div class="form-row">
                    <div class="form-group">
                        <label>Reference Number (Cannot be changed):</label>
                        <input type="text" id="refNo" readonly class="readonly-field">
                    </div>
                    <div class="form-group">
                        <label>Previous Reference Number (Read-only):</label>
                        <input type="text" id="prevRefNo" readonly class="readonly-field">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Customer Name: *</label>
                        <input type="text" id="customerName" maxlength="40" required>
                    </div>
                    <div class="form-group">
                        <label>Long Name: *</label>
                        <input type="text" id="longName" maxlength="100" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>CRIB ID Number (Read-only):</label>
                        <input type="text" id="cribId" readonly class="readonly-field">
                    </div>
                    <div class="form-group">
                        <label>NIDSS Account Number (Read-only):</label>
                        <input type="text" id="nidss" readonly class="readonly-field">
                    </div>
                </div>
            </fieldset>

            <!-- Account Identification -->
            <fieldset class="readonly-section">
                <legend>Account Identification (Read-only)</legend>
                <div class="form-row">
                    <div class="form-group">
                        <label>Center Code:</label>
                        <input type="text" id="centerCode" readonly class="readonly-field">
                    </div>
                    <div class="form-group">
                        <label>Budget Unit:</label>
                        <input type="text" id="budgetUnit" readonly class="readonly-field">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>Corporation:</label>
                        <input type="text" id="corporation" readonly class="readonly-field">
                    </div>
                    <div class="form-group">
                        <label>Account Type:</label>
                        <input type="text" id="accountType" readonly class="readonly-field">
                    </div>
                </div>
            </fieldset>

            <!-- Loan Dates -->
            <fieldset class="readonly-section">
                <legend>Loan Dates (Read-only)</legend>
                <div class="form-row">
                    <div class="form-group">
                        <label>Original Release Date:</label>
                        <input type="date" id="originalReleaseDate" readonly class="readonly-field">
                    </div>
                    <div class="form-group">
                        <label>Maturity Date:</label>
                        <input type="date" id="maturityDate" readonly class="readonly-field">
                    </div>
                </div>
            </fieldset>

            <!-- Guarantee and Litigation -->
            <fieldset class="editable-section">
                <legend>Guarantee and Litigation Information (Editable)</legend>
                <div class="form-row">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="isGuaranteed" onchange="toggleGuaranteedBy()">
                            Is Guaranteed
                        </label>
                    </div>
                    <div class="form-group">
                        <label>Guaranteed By:</label>
                        <input type="text" id="guaranteedBy" maxlength="100" placeholder="Enter guarantor name">
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label>
                            <input type="checkbox" id="isUnderLitigation" onchange="toggleLitigationDate()">
                            Is Under Litigation
                        </label>
                    </div>
                    <div class="form-group">
                        <label>Litigation Date:</label>
                        <input type="date" id="litigationDate">
                    </div>
                </div>
            </fieldset>

            <!-- Actions -->
            <div style="text-align: center; margin-top: 30px;">
                <button onclick="updateAccount()" class="btn-success">üíæ Update Account</button>
                <button onclick="cancelUpdate()" class="btn-secondary">‚ùå Cancel</button>
            </div>
        </div>
    </div>

    <script>
        // Sample data
        const sampleAccounts = {
            '1': {
                accountId: 1,
                referenceNumber: 'LA-2025-0001',
                previousReferenceNumber: 'LA-2024-9999',
                customerName: 'Juan Dela Cruz',
                longName: 'Juan Dela Cruz Manufacturing Corp',
                cribidNumber: '1234567890',
                nidssAccountNumber: '1234567890123',
                centerCode: '001',
                budgetUnit: '001',
                corporation: 'CORP001',
                accountType: 'LOAN',
                originalReleaseDate: '2025-01-01',
                maturityDate: '2026-01-01',
                isGuaranteed: false,
                guaranteedBy: '',
                isUnderLitigation: false,
                litigationDate: ''
            },
            'LA-2025-0001': {
                accountId: 1,
                referenceNumber: 'LA-2025-0001',
                previousReferenceNumber: 'LA-2024-9999',
                customerName: 'Juan Dela Cruz',
                longName: 'Juan Dela Cruz Manufacturing Corp',
                cribidNumber: '1234567890',
                nidssAccountNumber: '1234567890123',
                centerCode: '001',
                budgetUnit: '001',
                corporation: 'CORP001',
                accountType: 'LOAN',
                originalReleaseDate: '2025-01-01',
                maturityDate: '2026-01-01',
                isGuaranteed: false,
                guaranteedBy: '',
                isUnderLitigation: false,
                litigationDate: ''
            },
            '2': {
                accountId: 2,
                referenceNumber: 'LA-2025-0002',
                previousReferenceNumber: 'LA-2024-9998',
                customerName: 'Maria Santos',
                longName: 'Maria Santos Trading Inc',
                cribidNumber: '2345678901',
                nidssAccountNumber: '2345678901234',
                centerCode: '002',
                budgetUnit: '002',
                corporation: 'CORP002',
                accountType: 'LOAN',
                originalReleaseDate: '2025-01-02',
                maturityDate: '2026-01-02',
                isGuaranteed: true,
                guaranteedBy: 'ABC Bank',
                isUnderLitigation: false,
                litigationDate: ''
            },
            'LA-2025-0002': {
                accountId: 2,
                referenceNumber: 'LA-2025-0002',
                previousReferenceNumber: 'LA-2024-9998',
                customerName: 'Maria Santos',
                longName: 'Maria Santos Trading Inc',
                cribidNumber: '2345678901',
                nidssAccountNumber: '2345678901234',
                centerCode: '002',
                budgetUnit: '002',
                corporation: 'CORP002',
                accountType: 'LOAN',
                originalReleaseDate: '2025-01-02',
                maturityDate: '2026-01-02',
                isGuaranteed: true,
                guaranteedBy: 'ABC Bank',
                isUnderLitigation: false,
                litigationDate: ''
            }
        };

        let currentAccount = null;

        function showMessage(message, type = 'success') {
            const messagesDiv = document.getElementById('messages');
            messagesDiv.innerHTML = `<div class="alert alert-${type}">${message}</div>`;
            setTimeout(() => messagesDiv.innerHTML = '', 5000);
        }

        function loadAccount() {
            const refNo = document.getElementById('searchRefNo').value.trim();
            const accountId = document.getElementById('searchAccountId').value.trim();

            if (!refNo && !accountId) {
                showMessage('Please enter either a Reference Number or Account ID to search.', 'error');
                return;
            }

            const searchKey = refNo || accountId;
            const account = sampleAccounts[searchKey];

            if (!account) {
                showMessage(`Account with ${refNo ? 'Reference Number' : 'Account ID'} '${searchKey}' not found.`, 'error');
                return;
            }

            currentAccount = account;
            populateForm(account);
            document.getElementById('accountInfo').style.display = 'block';
            document.getElementById('searchRefNo').value = '';
            document.getElementById('searchAccountId').value = '';
            showMessage('Account loaded successfully!');
        }

        function populateForm(account) {
            document.getElementById('refNo').value = account.referenceNumber;
            document.getElementById('prevRefNo').value = account.previousReferenceNumber;
            document.getElementById('customerName').value = account.customerName;
            document.getElementById('longName').value = account.longName;
            document.getElementById('cribId').value = account.cribidNumber;
            document.getElementById('nidss').value = account.nidssAccountNumber;
            document.getElementById('centerCode').value = account.centerCode;
            document.getElementById('budgetUnit').value = account.budgetUnit;
            document.getElementById('corporation').value = account.corporation;
            document.getElementById('accountType').value = account.accountType;
            document.getElementById('originalReleaseDate').value = account.originalReleaseDate;
            document.getElementById('maturityDate').value = account.maturityDate;
            document.getElementById('isGuaranteed').checked = account.isGuaranteed;
            document.getElementById('guaranteedBy').value = account.guaranteedBy;
            document.getElementById('isUnderLitigation').checked = account.isUnderLitigation;
            document.getElementById('litigationDate').value = account.litigationDate;

            toggleGuaranteedBy();
            toggleLitigationDate();
        }

        function toggleGuaranteedBy() {
            const isGuaranteed = document.getElementById('isGuaranteed').checked;
            const guaranteedByField = document.getElementById('guaranteedBy');
            
            guaranteedByField.disabled = !isGuaranteed;
            if (!isGuaranteed) {
                guaranteedByField.value = '';
                guaranteedByField.classList.add('readonly-field');
            } else {
                guaranteedByField.classList.remove('readonly-field');
            }
        }

        function toggleLitigationDate() {
            const isUnderLitigation = document.getElementById('isUnderLitigation').checked;
            const litigationDateField = document.getElementById('litigationDate');
            
            litigationDateField.disabled = !isUnderLitigation;
            if (!isUnderLitigation) {
                litigationDateField.value = '';
                litigationDateField.classList.add('readonly-field');
            } else {
                litigationDateField.classList.remove('readonly-field');
            }
        }

        function updateAccount() {
            if (!currentAccount) {
                showMessage('Please load an account first before updating.', 'error');
                return;
            }

            const customerName = document.getElementById('customerName').value.trim();
            const longName = document.getElementById('longName').value.trim();

            if (!customerName || !longName) {
                showMessage('Customer Name and Long Name are required.', 'error');
                return;
            }

            // Simulate update
            currentAccount.customerName = customerName;
            currentAccount.longName = longName;
            currentAccount.isGuaranteed = document.getElementById('isGuaranteed').checked;
            currentAccount.guaranteedBy = document.getElementById('isGuaranteed').checked ? 
                document.getElementById('guaranteedBy').value.trim() : '';
            currentAccount.isUnderLitigation = document.getElementById('isUnderLitigation').checked;
            currentAccount.litigationDate = document.getElementById('isUnderLitigation').checked ? 
                document.getElementById('litigationDate').value : '';

            showMessage('Account updated successfully! (This is a simulation - changes are not saved to a real database)');
        }

        function cancelUpdate() {
            showMessage('Cancel clicked - In a real application, this would redirect to ViewAccount or Default page.', 'error');
        }

        function clearSearch() {
            document.getElementById('searchRefNo').value = '';
            document.getElementById('searchAccountId').value = '';
            document.getElementById('accountInfo').style.display = 'none';
            document.getElementById('messages').innerHTML = '';
            currentAccount = null;
        }
    </script>
</body>
</html>